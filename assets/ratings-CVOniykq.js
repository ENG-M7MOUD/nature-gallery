function g(n){const e=localStorage.getItem(`rating:${n}`);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function o(n,e){const a=g(n);let t;if(a){const i=a.avgRating*a.ratingCount+e,r=a.ratingCount+1;t={avgRating:i/r,ratingCount:r}}else t={avgRating:e,ratingCount:1};return localStorage.setItem(`rating:${n}`,JSON.stringify(t)),window.dispatchEvent(new StorageEvent("storage",{key:`rating:${n}`,newValue:JSON.stringify(t)})),t}function s(n,e){function a(t){if(t.key===`rating:${n}`&&t.newValue)try{e(JSON.parse(t.newValue))}catch{}}return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}export{g as getRating,o as submitRating,s as subscribeRating};
